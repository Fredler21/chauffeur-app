<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Book a Ride | Chauffeur App</title>
  <meta name="description" content="Book a premium private chauffeur ride with route preview and live pricing.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body>
  <div class="page-loader" id="pageLoader"><div class="loader-ring"></div></div>
  <div class="bg-glow" aria-hidden="true"></div>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="container">
      <a class="brand" href="../index.html"><span class="logo-dot"></span><span>Chauffeur App</span></a>
      <div class="nav-links" id="navLinks">
        <a href="../index.html">Home</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="book.html" class="active">Book a Ride</a>
      </div>
      <div class="nav-right">
        <button class="dm-toggle" id="dmToggle" aria-label="Toggle dark mode"></button>
        <a class="btn btn-ghost btn-sm" href="../index.html">← Back</a>
        <button class="nav-burger" id="navBurger" aria-label="Toggle menu"><span></span><span></span><span></span></button>
      </div>
    </div>
  </nav>

  <main>
    <!-- TITLE -->
    <section class="section" style="padding-bottom:0">
      <div class="container">
        <h1>Book Your Chauffeur</h1>
        <p class="lead" style="margin-top:6px">Driver → Vehicle → Route → Payment</p>
      </div>
    </section>

    <!-- COMPACT PROGRESS BAR -->
    <section class="section" style="padding:20px 0">
      <div class="container">
        <div class="progress-steps" id="progressSteps">
          <div class="progress-step is-active" data-step="1"><span class="step-num">1</span> Driver</div>
          <div class="progress-step" data-step="2"><span class="step-num">2</span> Vehicle</div>
          <div class="progress-step" data-step="3"><span class="step-num">3</span> Route</div>
          <div class="progress-step" data-step="4"><span class="step-num">4</span> Confirm</div>
        </div>
      </div>
    </section>

    <!-- STEP 1: DRIVERS — single appearance, mobile swipeable -->
    <section class="section" id="step-driver" style="padding-top:0">
      <div class="container">
        <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;margin-bottom:16px">
          <div>
            <h2>Step 1 — Choose Your Driver</h2>
            <p class="lead">Tap a driver to begin.</p>
          </div>
          <div class="hint" id="driverHint">Select 1 driver</div>
        </div>

        <div class="driver-scroll-wrap" id="driverScrollWrap">
        <button class="driver-scroll-btn prev" id="driverPrev" type="button" aria-label="Previous driver">&#8249;</button>
        <button class="driver-scroll-btn next" id="driverNext" type="button" aria-label="Next driver">&#8250;</button>
        <div class="grid-3" id="driverGrid">
          <article class="card driver-card" data-driver-id="fredler" data-driver-name="Fredler Gracia Pierre-Louis" tabindex="0" role="button">
            <div class="card-badge available">Available</div>
            <img src="../assets/images/drivers/driver1.jpg" alt="Fredler Gracia Pierre-Louis">
            <h3>Fredler Gracia Pierre-Louis</h3>
            <p class="driver-meta">3 yrs Uber · 2 yrs Lyft · 3 languages</p>
            <p class="driver-desc">Cybersecurity student with strong safety awareness and premium service mindset.</p>
            <div class="card-actions"><button class="btn btn-primary btn-sm" type="button">Select</button></div>
          </article>

          <article class="card driver-card" data-driver-id="sebastien" data-driver-name="Sebastien Jouthe" tabindex="0" role="button">
            <div class="card-badge available">Available</div>
            <img src="../assets/images/drivers/driver2.jpg" alt="Sebastien Jouthe">
            <h3>Sebastien Jouthe</h3>
            <p class="driver-meta">2 yrs Uber · 1 yr Lyft · HVAC certified</p>
            <p class="driver-desc">Reliable chauffeur known for punctual pickups and smooth rides.</p>
            <div class="card-actions"><button class="btn btn-primary btn-sm" type="button">Select</button></div>
          </article>

          <article class="card driver-card" data-driver-id="nason" data-driver-name="Nason Valcin" tabindex="0" role="button">
            <div class="card-badge available">Available</div>
            <img src="../assets/images/drivers/driver3.jpg" alt="Nason Valcin">
            <h3>Nason Valcin</h3>
            <p class="driver-meta">4 yrs Uber · 2 yrs Lyft</p>
            <p class="driver-desc">Experienced professional with strong route knowledge and customer-first service.</p>
            <div class="card-actions"><button class="btn btn-primary btn-sm" type="button">Select</button></div>
          </article>
        </div>
        <div class="driver-scroll-dots" id="driverDots">
          <span class="d-dot is-active" data-idx="0"></span>
          <span class="d-dot" data-idx="1"></span>
          <span class="d-dot" data-idx="2"></span>
        </div>
        </div>
      </div>
    </section>

    <!-- STEP 2: VEHICLES — auto-reveals with animation on driver selection -->
    <section class="section vehicle-section-locked" id="step-vehicle">
      <div class="container">
        <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;margin-bottom:16px">
          <div>
            <h2>Step 2 — Choose Your Vehicle</h2>
            <p class="lead">Unlocks after selecting a driver. <span class="step-unlocked-text">Step 2 Unlocked ✓</span></p>
          </div>
          <div class="hint" id="vehicleHint">Locked</div>
        </div>

        <div class="grid-3" id="vehicleGrid">
          <article class="card vehicle-card" data-vehicle-id="sedan" data-vehicle-name="Executive Sedan" tabindex="0" role="button">
            <div class="card-badge available">Available</div>
            <img src="../assets/images/vehicles/sedan.jpg" alt="Executive Sedan">
            <h3>Executive Sedan</h3>
            <p class="vehicle-meta">Up to 3 passengers · 2 luggage</p>
            <p class="vehicle-desc">Ideal for airport transfers and business travel.</p>
            <div class="card-actions"><button class="btn btn-primary btn-sm" type="button">Select</button></div>
          </article>

          <article class="card vehicle-card" data-vehicle-id="suv" data-vehicle-name="Luxury SUV" tabindex="0" role="button">
            <div class="card-badge available">Available</div>
            <img src="../assets/images/vehicles/suv.jpg" alt="Luxury SUV">
            <h3>Luxury SUV</h3>
            <p class="vehicle-meta">Up to 6 passengers · 5 luggage</p>
            <p class="vehicle-desc">Extra comfort and space for premium rides.</p>
            <div class="card-actions"><button class="btn btn-primary btn-sm" type="button">Select</button></div>
          </article>

          <article class="card vehicle-card" data-vehicle-id="van" data-vehicle-name="Premium Van" tabindex="0" role="button">
            <div class="card-badge available">Available</div>
            <img src="../assets/images/vehicles/van.jpg" alt="Premium Van">
            <h3>Premium Van</h3>
            <p class="vehicle-meta">Up to 10 passengers · 10 luggage</p>
            <p class="vehicle-desc">Best for group transportation and events.</p>
            <div class="card-actions"><button class="btn btn-primary btn-sm" type="button">Select</button></div>
          </article>
        </div>
      </div>
    </section>

    <!-- STEP 3: TRIP DETAILS -->
    <section class="section" id="step-route">
      <div class="container">
        <h2>Step 3 — Trip Details</h2>
        <p class="lead" style="margin-bottom:20px">Enter pickup &amp; drop-off. Distance is calculated automatically.</p>

        <form class="card booking-form" id="bookingForm" novalidate>
          <label>
            Pickup Location <span class="req">*</span>
            <input id="pickup" type="text" placeholder="Enter pickup address" required>
          </label>
          <label>
            Drop-off Location <span class="req">*</span>
            <input id="dropoff" type="text" placeholder="Enter destination address" required>
          </label>
          <div class="form-row">
            <label>Date <span class="req">*</span><input id="tripDate" type="date" required></label>
            <label>Time <span class="req">*</span><input id="tripTime" type="time" required></label>
          </div>
          <label>Special Requests<textarea id="requests" rows="2" placeholder="Flight number, child seat, stops, etc."></textarea></label>
        </form>

        <!-- ESTIMATE -->
        <div class="card" style="margin-top:16px">
          <h3 style="margin-top:0">Trip Estimate</h3>
          <p class="lead" style="margin-top:3px">Rate: <strong>$5/mile</strong> · Minimum: <strong>$75</strong></p>
          <div style="display:flex;gap:20px;flex-wrap:wrap;margin-top:14px">
            <div><p class="muted">Driver</p><strong id="selectedDriverText">None</strong></div>
            <div><p class="muted">Vehicle</p><strong id="selectedVehicleText">None</strong></div>
            <div><p class="muted">Distance</p><strong id="milesText">—</strong></div>
            <div><p class="muted">Estimated Total</p><strong id="totalText" class="text-red">$ —</strong></div>
          </div>
          <p id="calcMsg" class="muted" style="margin-top:10px"></p>
        </div>
      </div>
    </section>

    <!-- MAP PREVIEW -->
    <section class="section" id="step-map">
      <div class="container">
        <h2>Route Preview</h2>
        <p class="lead" style="margin-bottom:14px">Preview updates after entering addresses.</p>
        <div class="card" style="padding:0;overflow:hidden">
          <iframe id="mapFrame" title="Map preview" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps?q=Miami&output=embed" style="width:100%;height:300px;border:0"></iframe>
        </div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
          <a class="btn btn-ghost btn-sm" id="openPickup" href="#" target="_blank" rel="noreferrer">Open Pickup</a>
          <a class="btn btn-ghost btn-sm" id="openDropoff" href="#" target="_blank" rel="noreferrer">Open Drop-off</a>
          <a class="btn btn-primary btn-sm" id="openRoute" href="#" target="_blank" rel="noreferrer">Open Route</a>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="section" id="step-confirm">
      <div class="container">
        <div class="cta-strip">
          <div>
            <p class="cta-title">Continue to payment</p>
            <p class="cta-sub">Unlocks after driver + vehicle + route are ready.</p>
          </div>
          <button id="continueBookingBtn" class="btn btn-primary" disabled>Continue Booking</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-bottom">
        <span>&copy; <span id="footerYear">2026</span> Chauffeur App</span>
        <span>Licensed &amp; Insured</span>
      </div>
    </div>
  </footer>

  <div class="toast-container" id="toastContainer"></div>
  <script src="../assets/js/app.js"></script>
  <script src="../assets/js/booking.js"></script>
</body>
</html>
